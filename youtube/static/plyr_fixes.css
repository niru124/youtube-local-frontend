body{
    --plyr-control-spacing: calc(var(--plyr-control-spacing-num)*1px);
	--plyr-video-controls-background: rgba(30,30,46,0.8); /* ctp-base with transparency */
}

/* Scale captions with video height, not page width. Scale down to a minimum
   of 10px so it does not become unreadable, rather than scaling
   exactly proportional to video height */
.plyr__captions {
    font-size: calc(18px + 8px*(var(--video_height) - 720)/720) !important;
    color: var(--ctp-text);
}


/* make buffered progress more visible */
.plyr--video .plyr__progress__buffer{
    color: var(--ctp-overlay2) !important; /* Catppuccin overlay color */
}

/* Avoid visual jumps and flashes as plyr loads */
.plyr audio, .plyr iframe, .plyr video{
    width: 100% !important;
    height: 100% !important;
}
.plyr__video-wrapper{
    height: 100% !important;
    width: 100% !important;
    border-radius: 12px; /* Rounded video player */
    overflow: hidden; /* Ensures content respects border-radius */
}

/* Prevent this div from blocking right-click menu for video
e.g. Firefox playback speed options */
.plyr__poster{
    display: none !important;
}

/* Get rid of obnoxiously high padding on controls bar */
.plyr__controls{
    padding-top: 8px !important; /* Increased padding */
    padding-bottom: 8px !important; /* Increased padding */
    border-radius: 0 0 12px 12px; /* Rounded bottom corners for controls */
}

.plyr__captions{
    pointer-events: none;
}


/* For menus without a button above them - make them scroll if
   they are too high for the player*/
.plyr div[role="menu"]{
    overflow-y: scroll;
    max-height: calc(var(--video_height)*1px - 10px - 40px);
    background-color: var(--ctp-surface0); /* Catppuccin surface color */
    border-radius: 8px; /* Rounded menus */
}

/* For menus with a button above them */
.plyr button + div[role="menu"]{
    overflow-y: scroll;
    /* Subtract margin between controls and menu, and controls height,
       and height of top menu button*/
    max-height: calc(var(--video_height)*1px - 10px - 40px - 42px*var(--plyr-control-spacing-num)/10);
    background-color: var(--ctp-surface0); /* Catppuccin surface color */
    border-radius: 8px; /* Rounded menus */
}
